<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:rabbit="http://www.springframework.org/schema/rabbit"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
                        http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit-1.1.xsd">




	<!-- RabbitMQ connection -->
	<bean id="messageConverter"
		class="org.springframework.amqp.support.converter.JsonMessageConverter" />

	<rabbit:connection-factory id="rabbitmqConnectionFactory"
		addresses="${rabbitmq.host01},${rabbitmq.host02}" username="${rabbitmq.username}"
		password="${rabbitmq.password}" channel-cache-size="${rabbitmq.channel.cache.size}"
		virtual-host="${rabbitmq.virtual.host}" />

	<rabbit:template id="amqpTemplate" connection-factory="rabbitmqConnectionFactory"
		exchange="${rabbitmq.exchange}" encoding="${rabbitmq.encoding}"
		message-converter="messageConverter" channel-transacted="false" />


	<!-- <rabbit:admin id="amqpAdmin" connection-factory="rabbitmqConnectionFactory" 
		/> <rabbit:queue id="amqpQueue" name="${rabbitmq.queue.name}" > <rabbit:queue-arguments> 
		<entry key="x-message-ttl"> <value type="java.lang.Long">50</value> </entry> 
		<entry key="x-ha-policy" value="all" /> </rabbit:queue-arguments> </rabbit:queue> -->
	<!-- <bean id="rabbitTxManager" class="org.springframework.amqp.rabbit.transaction.RabbitTransactionManager"> 
		<property name="connectionFactory" ref="rabbitmqConnectionFactory"/> </bean> -->

</beans>